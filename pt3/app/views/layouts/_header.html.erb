<header class="navbar navbar-fixed-top navbar-inverse">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
   <%= image_tag("globe-medium.png", size: "32x32") %>&nbsp;
  <a class="navbar-brand" <%= link_to ENV.fetch("SYSACR") { "CMS" }, root_path, id: "logo" %>
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsMain">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" <%= link_to "Home", root_path %> <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <% if current_user.present? %>
          <% path = @organization.present? ? "#{logout_path}?organization=#{@organization}" : logout_path %>
          <%= link_to "Log Out", path, class:"nav-link" %>
        <% else %>
          <% path = @organization.present? ? "#{login_path}?organization=#{@organization}" : login_path %>
          <%= link_to "Log In", path, class:"nav-link" %>
        <% end %>
      </li>
      <% if current_user.present? %>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="dropdown_info" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Info</a>
          <div class="dropdown-menu" aria-labelledby="dropdown_info">
            <%= link_to "Help", help_path, class:"dropdown-item" %>
            <%= link_to "Contact", contact_path, class:"dropdown-item" %>
            <%= link_to "About", about_path, class:"dropdown-item" %>
            <div class="dropdown-divider"></div>
            <%= link_to "Edit User Info", edit_user_path(current_user), class:"dropdown-item" %>
            <%= link_to "Change Password", user_change_password_path(current_user), class:"dropdown-item" %>
            <% if @github_access.present? && @github_access.id.present? %>
              <%= link_to 'Edit GitHub Credentials', edit_github_access_path(@github_access), class: "dropdown-item" %>
            <% else %>
              <%= link_to 'Set GitHub Credentials', new_github_access_path, class: "dropdown-item" %>
            <% end %>
            <% if @gitlab_access.present? && @gitlab_access.id.present? %>
              <%= link_to 'Edit Gitlab Credentials', edit_gitlab_access_path(@gitlab_access), class: "dropdown-item" %>
            <% else %>
              <%= link_to 'Set Gitlab Credentials', new_gitlab_access_path, class: "dropdown-item" %>
            <% end %>
          </div>
        </li>
        <% if current_user.present? and policy(:project).destroy? %>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="dropdown_admin" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Admin</a>
          <div class="dropdown-menu" aria-labelledby="dropdown_admin">
            <%= link_to "Users",                users_path,                                   class:"dropdown-item" %>
            <%= link_to 'Github Credentials',   github_accesses_path,                         class:"dropdown-item" %>
            <%= link_to 'Gitlab Credentials',   gitlab_accesses_path,                         class:"dropdown-item" %>

            <div class="dropdown-divider"></div>
            <% if current_user.organization == 'global' %>
              <%= link_to 'ACS Templates',                    templates_path(awc:true),            class:"dropdown-item" %>
              <%= link_to 'Organization Templates',           templates_path,                      class:"dropdown-item" %>
            <% else %>
              <%= link_to 'ACS Checklist Templates',          template_checklists_path(awc:true),  class:"dropdown-item" %>
              <%= link_to 'ACS Document Templates',           template_documents_path(awc:true),   class:"dropdown-item" %>
              <%= link_to 'Organization Checklist Templates', template_checklists_path,            class:"dropdown-item" %>
              <%= link_to 'Organization Document Templates',  template_documents_path,             class:"dropdown-item" %>
              <%= link_to 'Update ACS Templates',             duplicate_global_templates_path,     class:"dropdown-item" %>
              <%= link_to 'Populate ACS Templates',           populate_global_templates_path,      class:"dropdown-item" %>
            <% end %>

            <% if policy(current_user).userrole_match('AirWorthinessCert Member') %>
              <div class="dropdown-divider"></div>
              <%= link_to 'Document Types',      document_types_path,                         class:"dropdown-item" %>
              <%= link_to "Switch Organization", user_switch_organization_path(current_user), class:"dropdown-item" %>
              <%= link_to "Switch User",         user_switch_user_path(current_user),         class:"dropdown-item" %>
              <%= link_to "Copy User",           user_copy_user_path(current_user),           class:"dropdown-item" %>
              <%= link_to "Copy Users",          user_copy_users_path(current_user),          class:"dropdown-item" %>

              <% if current_user.organization == 'global' %>
                <div class="dropdown-divider"></div>
                <%= link_to "Organizations",     licensees_path,                              class:"dropdown-item" %>
              <% end %>
            <% end %>
          </div>
        </li>
        <% end %>

        <% if controller.controller_name == 'projects' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="projects" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:project).create? %>
                  <%=
                      link_to 'New Project',
                      new_project_path,
                      class: 'dropdown-item'
                   %>

                  <div class="dropdown-divider"></div>
                <% end %>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="projects" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Project</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Projects',
                    projects_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:project).create? %>
                  <%=
                      link_to 'Create Project',
                      'javascript:submitForm("new_project")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Project',
                      new_project_path,
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="projects" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Project</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Projects',
                    projects_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@project).update? %>
                  <%=
                      link_to 'Update Project',
                      'javascript:$(\'[id*="edit_project_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@project).show? %>
                  <%=
                      link_to 'Show Project',
                      project_path(@project),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:project).create? %>
                  <%=
                      link_to 'New Project',
                      new_project_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@project).destroy? %>
                  <%=
                      link_to 'Delete',
                      @project, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="projects" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Project</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Projects',
                    projects_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@project).edit? %>
                  <%=
                      link_to 'Edit Project',
                      edit_project_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:project).create? %>
                  <%=
                      link_to 'New Project',
                      new_project_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@project).destroy? %>
                  <%=
                      link_to 'Delete',
                      @project, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'system_requirements' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="system_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">System Requirements</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:system_requirement).create? %>
                  <%=
                      link_to 'New System Requirement',
                      new_project_system_requirement_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).export? %>
                  <%=
                      link_to 'Export',
                      project_system_requirements_export_path(@project),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).import? %>
                  <%=
                      link_to 'Import',
                      project_system_requirements_import_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      project_system_requirements_renumber_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="system_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">System Requirement</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'System Requirements',
                    project_system_requirements_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:system_requirement).create? %>
                  <%=
                      link_to 'Save System Requirement',
                      'javascript:submitForm("new_system_requirement")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New System Requirement',
                      new_project_system_requirement_path(@project),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <% if policy(:system_requirement).export? %>
                  <%=
                      link_to 'Export',
                      project_system_requirements_export_path(@project),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).import? %>
                  <%=
                      link_to 'Import',
                      project_system_requirements_import_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      project_system_requirements_renumber_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="system_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">System Requirement</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'System Requirements',
                    project_system_requirements_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@system_requirement).update? %>
                  <%=
                      link_to 'Update System Requirement',
                      'javascript:$(\'[id*="edit_system_requirement_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@system_requirement).show? %>
                  <%=
                      link_to 'Show System Requirement',
                      project_system_requirement_path(@project, @system_requirement),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:system_requirement).create? %>
                  <%=
                      link_to 'New System Requirement',
                      new_project_system_requirement_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).export? %>
                  <%=
                      link_to 'Export',
                      project_system_requirements_export_path(@project),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).import? %>
                  <%=
                      link_to 'Import',
                      project_system_requirements_import_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      project_system_requirements_renumber_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@system_requirement).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      project_system_requirement_mark_as_deleted_path(@project, @system_requirement),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@system_requirement).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@project, @system_requirement], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="system_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">System Requirement</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'System Requirements',
                    project_system_requirements_path(@project),
                    class: 'dropdown-item'
                 %>

                <% if policy(:system_requirement).export? %>
                  <%=
                      link_to 'Export',
                      project_system_requirements_export_path(@project),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).import? %>
                  <%=
                      link_to 'Import',
                      project_system_requirements_import_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      project_system_requirements_renumber_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@system_requirement).edit? %>
                  <%=
                      link_to 'Edit System Requirement',
                      edit_project_system_requirement_path(@project, @system_requirement),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:system_requirement).create? %>
                  <%=
                      link_to 'New System Requirement',
                      new_project_system_requirement_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@system_requirement).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      project_system_requirement_mark_as_deleted_path(@project, @system_requirement),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@system_requirement).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@project, @system_requirement], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'items' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Items</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:item).create? %>
                  <%=
                      link_to 'New Item',
                      new_project_item_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Items',
                    project_items_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:item).create? %>
                  <%=
                      link_to 'Create Item',
                      'javascript:submitForm("new_item")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Item',
                      new_project_item_path(@project),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Items',
                    project_items_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@item).update? %>
                  <%=
                      link_to 'Update Item',
                      'javascript:$(\'[id*="edit_item_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@item).show? %>
                  <%=
                      link_to 'Show Item',
                      project_item_path(@project, @item),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:item).create? %>
                  <%=
                      link_to 'New Item',
                      new_project_item_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@item).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@project, @item], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Items',
                    project_items_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@item).edit? %>
                  <%=
                      link_to 'Edit Item',
                      edit_project_item_path(@project, @item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:item).create? %>
                  <%=
                      link_to 'New Item',
                      new_project_item_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@item).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@project, @item], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'model_files' %>
          <%
              if @item.present?
                model_file_list_url            = item_model_files_path(@item)
                model_file_action_url          = item_model_files_path(@item)
                model_file_new_url             = new_item_model_file_path(@item)
                model_file_export_url          = item_model_files_export_path(@item, new_window: true)
                model_file_import_url          = item_model_files_export_path(@item, new_window: true)
                model_file_renumber_url        = item_model_files_renumber_path(@item)

                if @model_file.try(:id)
                  model_file_show_url            = item_model_file_path(@item, @model_file)
                  model_file_edit_url            = edit_item_model_file_path(@item, @model_file)
                  model_file_mark_as_deleted_url = item_model_file_mark_as_deleted_path(@item, @model_file)
                  model_file_delete_url          = [@item, @model_file]
                end
              else
                model_file_list_url            = project_model_files_path(@project)
                model_file_action_url          = project_model_files_path(@project)
                model_file_new_url             = new_project_model_file_path(@project)
                model_file_export_url          = project_model_files_export_path(@project, new_window: true)
                model_file_import_url          = project_model_files_import_path(@project)
                model_file_renumber_url        = project_model_files_renumber_path(@project)

                if @model_file.try(:id)
                  model_file_show_url            = project_model_file_path(@project, @model_file)
                  model_file_edit_url            = edit_project_model_file_path(@project, @model_file)
                  model_file_mark_as_deleted_url = project_model_file_mark_as_deleted_path(@project, @model_file)
                  model_file_delete_url          = [@project, @model_file]
                end
              end
          %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="model_files" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.model_file') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:model_file).create? %>
                  <%=
                      link_to "New #{t('misc.model_file')}",
                      model_file_new_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).export? %>
                  <%=
                      link_to 'Export',
                      model_file_export_url,
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).import? %>
                  <%=
                      link_to 'Import',
                      model_file_import_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).renumber? %>
                  <%=
                      link_to 'Renumber',
                      model_file_renumber_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="model_files" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.model_file') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.model_file'),
                    model_file_list_url,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:model_file).create? %>
                  <%=
                      link_to "Save #{t('misc.model_file')}",
                      'javascript:submitForm("new_model_file")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to "New #{t('misc.model_file')}",
                      model_file_new_url,
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <% if policy(:model_file).export? %>
                  <%=
                      link_to 'Export',
                      model_file_export_url,
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).import? %>
                  <%=
                      link_to 'Import',
                      model_file_import_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).renumber? %>
                  <%=
                      link_to 'Renumber',
                      model_file_renumber_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="model_files" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.model_file') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.model_file'),
                    model_file_list_url,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@model_file).update? %>
                  <%=
                      link_to "Update #{t('misc.model_file')}",
                      'javascript:$(\'[id*="edit_model_file_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@model_file).show? %>
                  <%=
                      link_to "Show #{t('misc.model_file')}",
                      model_file_show_url,
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:model_file).create? %>
                  <%=
                      link_to "New #{t('misc.model_file')}",
                      model_file_new_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).export? %>
                  <%=
                      link_to 'Export',
                      model_file_export_url,
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).import? %>
                  <%=
                      link_to 'Import',
                      model_file_import_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).renumber? %>
                  <%=
                      link_to 'Renumber',
                      model_file_renumber_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@model_file).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      model_file_mark_as_deleted_url,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@model_file).destroy? %>
                  <%=
                      link_to 'Delete',
                     model_file_delete_url, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="model_files" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.model_file') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.model_file'),
                    model_file_list_url,
                    class: 'dropdown-item'
                 %>

                <% if policy(:model_file).export? %>
                  <%=
                      link_to 'Export',
                      model_file_export_url,
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).import? %>
                  <%=
                      link_to 'Import',
                      model_file_import_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).renumber? %>
                  <%=
                      link_to 'Renumber',
                      model_file_renumber_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@model_file).edit? %>
                  <%=
                      link_to "Edit #{t('misc.model_file')}",
                      model_file_edit_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:model_file).create? %>
                  <%=
                      link_to "New #{t('misc.model_file')}",
                      model_file_new_url,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@model_file).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      model_file_mark_as_deleted_url,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@model_file).destroy? %>
                  <%=
                      link_to 'Delete',
                     model_file_delete_url, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'problem_reports' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_reports" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Reports</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:problem_report).create? %>
                  <%=
                      link_to 'New Problem Report',
                      new_project_problem_report_path(@project) + '?new_window=true',
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                    link_to 'All Problem Reports',
                    project_problem_reports_path(@project),
                    class: 'dropdown-item'
                 %>

                <%=
                    link_to 'My Problem Reports',
                    project_problem_reports_path(@project,
                                                 my_problem_reports: true),
                    class: 'dropdown-item'
                  %>

                <%=
                    link_to 'PRs Assigned to Me',
                    project_problem_reports_path(@project,
                                                 problem_reports_assigned_to_me: true),
                    class: 'dropdown-item'
                  %>

                <%=
                    link_to 'Open Problem Reports',
                    project_problem_reports_open_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_reports" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Reports',
                    project_problem_reports_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:problem_report).create? %>
                  <%=
                      link_to 'Create Problem Report',
                      'javascript:submitForm("new_problem_report")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Problem Report',
                      new_project_problem_report_path(@project) + '?new_window=true',
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_reports" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Reports',
                    project_problem_reports_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report).update? %>
                  <%=
                      link_to 'Update Problem Report',
                      'javascript:$(\'[id*="edit_problem_report_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@problem_report).show? %>
                  <%=
                      link_to 'Show Problem Report',
                      project_problem_report_path(@project, @problem_report),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:problem_report).create? %>
                  <%=
                      link_to 'New Problem Report',
                      new_project_problem_report_path(@project) + '?new_window=true',
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@project, @problem_report], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_reports" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Reports',
                    project_problem_reports_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report).edit? %>
                  <%=
                      link_to 'Edit Problem Report',
                      edit_project_problem_report_path(@project, @problem_report),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:problem_report).create? %>
                  <%=
                      link_to 'New Problem Report',
                      new_project_problem_report_path(@project) + '?new_window=true',
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@project, @problem_report], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'high_level_requirements' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="high_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :high_level) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:high_level_requirement).create? %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :high_level, :singular)}",
                      new_item_high_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_high_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_high_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_high_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="high_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :high_level) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to "#{Item.item_type_title(@item, :high_level, :singular)}",
                    item_high_level_requirements_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:high_level_requirement).create? %>
                  <%=
                      link_to "Save #{Item.item_type_title(@item, :high_level, :singular)}",
                      'javascript:submitForm("new_high_level_requirement")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :high_level, :singular)}",
                      new_item_high_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <% if policy(:high_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_high_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_high_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_high_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="high_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :high_level) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to Item.item_type_title(@item, :high_level),
                    item_high_level_requirements_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@high_level_requirement).update? %>
                  <%=
                      link_to "Update #{Item.item_type_title(@item, :high_level, :singular)}",
                      'javascript:$(\'[id*="edit_high_level_requirement_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@high_level_requirement).show? %>
                  <%=
                      link_to "Show #{Item.item_type_title(@item, :high_level, :singular)}",
                      item_high_level_requirement_path(@item, @high_level_requirement),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:high_level_requirement).create? %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :high_level, :singular)}",
                      new_item_high_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_high_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_high_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_high_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@high_level_requirement).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_high_level_requirement_mark_as_deleted_path(@item, @high_level_requirement),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@high_level_requirement).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @high_level_requirement], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'associate' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="high_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :high_level) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to Item.item_type_title(@item, :high_level),
                    item_high_level_requirements_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:high_level_requirement).show? %>
                  <%=
                      link_to "Show #{Item.item_type_title(@item, :high_level, :singular)}",
                      item_high_level_requirement_path(@item, params[:id]),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:high_level_requirement).edit? %>
                  <%=
                      link_to "Edit #{Item.item_type_title(@item, :high_level, :singular)}",
                      edit_item_high_level_requirement_path(@item, params[:id]),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).create? %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :high_level, :singular)}",
                      new_item_high_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_high_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_high_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_high_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(:high_level_requirement).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_high_level_requirement_mark_as_deleted_path(@item, params[:id]),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="high_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :high_level, :singular) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to Item.item_type_title(@item, :high_level, :singular),
                    item_high_level_requirements_path(@item),
                    class: 'dropdown-item'
                 %>

                <% if policy(:high_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_high_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_high_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_high_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@high_level_requirement).edit? %>
                  <%=
                      link_to "Edit #{Item.item_type_title(@item, :high_level, :singular)}",
                      edit_item_high_level_requirement_path(@item, @high_level_requirement),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:high_level_requirement).create? %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :high_level, :singular)}",
                      new_item_high_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@high_level_requirement).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_high_level_requirement_mark_as_deleted_path(@item, @high_level_requirement),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@high_level_requirement).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @high_level_requirement], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'low_level_requirements' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="low_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :low_level, :plural) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:low_level_requirement).create? %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :low_level, :singular)}",
                      new_item_low_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_low_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_low_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_low_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="low_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :low_level, :singular) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to Item.item_type_title(@item, :low_level, :plural),
                    item_low_level_requirements_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:low_level_requirement).create? %>
                  <%=
                      link_to "Save #{Item.item_type_title(@item, :low_level, :singular)}",
                      'javascript:submitForm("new_low_level_requirement")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :low_level, :singular)}",
                      new_item_low_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <% if policy(:low_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_low_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_low_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_low_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="low_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :low_level, :singular) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to Item.item_type_title(@item, :low_level, :plural),
                    item_low_level_requirements_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@low_level_requirement).update? %>
                  <%=
                      link_to "Update #{Item.item_type_title(@item, :low_level, :singular)}",
                      'javascript:$(\'[id*="edit_low_level_requirement_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@low_level_requirement).show? %>
                  <%=
                      link_to "Show #{Item.item_type_title(@item, :low_level, :singular)}",
                      item_low_level_requirement_path(@item, @low_level_requirement),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:low_level_requirement).create? %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :low_level, :singular)}",
                      new_item_low_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_low_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_low_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_low_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@low_level_requirement).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_low_level_requirement_mark_as_deleted_path(@item, @low_level_requirement),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@low_level_requirement).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @low_level_requirement], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'associate' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="low_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :low_level, :singular) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to Item.item_type_title(@item, :low_level, :plural),
                    item_low_level_requirements_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:low_level_requirement).show? %>
                  <%=
                      link_to "Show #{Item.item_type_title(@item, :low_level, :singular)}",
                      item_low_level_requirement_path(@item, params[:id]),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:low_level_requirement).edit? %>
                  <%=
                      link_to "Edit #{Item.item_type_title(@item, :low_level, :singular)}",
                      edit_item_low_level_requirement_path(@item, params[:id]),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).create? %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :low_level, :singular)}",
                      new_item_low_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_low_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_low_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_low_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(:low_level_requirement).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_low_level_requirement_mark_as_deleted_path(@item, params[:id]),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="low_level_requirements" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= Item.item_type_title(@item, :low_level, :singular) %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to Item.item_type_title(@item, :low_level, :plural),
                    item_low_level_requirements_path(@item),
                    class: 'dropdown-item'
                 %>

                <% if policy(:low_level_requirement).export? %>
                  <%=
                      link_to 'Export',
                      item_low_level_requirements_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).import? %>
                  <%=
                      link_to 'Import',
                      item_low_level_requirements_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_low_level_requirements_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@low_level_requirement).edit? %>
                  <%=
                      link_to "Edit #{Item.item_type_title(@item, :low_level, :singular)}",
                      edit_item_low_level_requirement_path(@item, @low_level_requirement),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:low_level_requirement).create? %>
                  <%=
                      link_to "New #{Item.item_type_title(@item, :low_level, :singular)}",
                      new_item_low_level_requirement_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@low_level_requirement).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_low_level_requirement_mark_as_deleted_path(@item, @low_level_requirement),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@low_level_requirement).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @low_level_requirement], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'source_codes' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="source_codes" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.source_code') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:source_code).create? %>
                  <%=
                      link_to "New #{t('misc.source_code')}",
                      new_item_source_code_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).export? %>
                  <%=
                      link_to 'Export',
                      item_source_codes_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).import? %>
                  <%=
                      link_to 'Import',
                      item_source_codes_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_source_codes_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).instrument? %>
                  <%=
                      link_to 'Setup Coverage',
                      item_source_codes_instrument_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).profile? %>
                  <%=
                      link_to 'Profile',
                      item_source_codes_profile_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).process_results? %>
                  <%=
                      link_to 'Process Results',
                      item_source_codes_process_results_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(:source_code).scan_github? %>
                  <%=
                      link_to "Scan GitHub Files",
                      item_source_codes_scan_github_path(@item),
                      class: "dropdown-item"
                   %>
                <% end %>

                <% if policy(:source_code).scan_gitlab? %>
                  <%=
                      link_to "Scan GitLab Files",
                      item_source_codes_scan_gitlab_path(@item),
                      class: "dropdown-item"
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="source_codes" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.source_code') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.source_code'),
                    item_source_codes_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:source_code).create? %>
                  <%=
                      link_to "Save #{t('misc.source_code')}",
                      'javascript:submitForm("new_source_code")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to "New #{t('misc.source_code')}",
                      new_item_source_code_path(@item),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <% if policy(:source_code).export? %>
                  <%=
                      link_to 'Export',
                      item_source_codes_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).import? %>
                  <%=
                      link_to 'Import',
                      item_source_codes_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_source_codes_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).instrument? %>
                  <%=
                      link_to 'Setup Coverage',
                      item_source_codes_instrument_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).profile? %>
                  <%=
                      link_to 'Profile',
                      item_source_codes_profile_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).process_results? %>
                  <%=
                      link_to 'Process Results',
                      item_source_codes_process_results_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(:source_code).scan_github? %>
                  <%=
                      link_to "Scan Files in GitHub",
                      item_source_codes_scan_github_path(@item),
                      class: "dropdown-item"
                   %>
                <% end %>

                <% if policy(:source_code).scan_gitlab? %>
                  <%=
                      link_to "Scan Files in GitLab",
                      item_source_codes_scan_gitlab_path(@item),
                      class: "dropdown-item"
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="source_codes" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.source_code') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.source_code'),
                    item_source_codes_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@source_code).update? %>
                  <%=
                      link_to "Update #{t('misc.source_code')}",
                      'javascript:$(\'[id*="edit_source_code_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@source_code).show? %>
                  <%=
                      link_to "Show #{t('misc.source_code')}",
                      item_source_code_path(@item, @source_code),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:source_code).create? %>
                  <%=
                      link_to "New #{t('misc.source_code')}",
                      new_item_source_code_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).export? %>
                  <%=
                      link_to 'Export',
                      item_source_codes_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).import? %>
                  <%=
                      link_to 'Import',
                      item_source_codes_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_source_codes_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).instrument? %>
                  <%=
                      link_to 'Setup Coverage',
                      item_source_codes_instrument_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).profile? %>
                  <%=
                      link_to 'Profile',
                      item_source_codes_profile_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).process_results? %>
                  <%=
                      link_to 'Process Results',
                      item_source_codes_process_results_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(:source_code).scan_github? %>
                  <%=
                      link_to "Scan Files in GitHub",
                      item_source_codes_scan_github_path(@item),
                      class: "dropdown-item"
                   %>
                <% end %>

                <% if policy(:source_code).scan_gitlab? %>
                  <%=
                      link_to "Scan Files in GitLab",
                      item_source_codes_scan_gitlab_path(@item),
                      class: "dropdown-item"
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@source_code).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_source_code_mark_as_deleted_path(@item, @source_code),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@source_code).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @source_code], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="source_codes" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.source_code') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.source_code'),
                    item_source_codes_path(@item),
                    class: 'dropdown-item'
                 %>

                <% if policy(:source_code).export? %>
                  <%=
                      link_to 'Export',
                      item_source_codes_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).import? %>
                  <%=
                      link_to 'Import',
                      item_source_codes_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_source_codes_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).instrument? %>
                  <%=
                      link_to 'Setup Coverage',
                      item_source_codes_instrument_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).profile? %>
                  <%=
                      link_to 'Profile',
                      item_source_codes_profile_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).process_results? %>
                  <%=
                      link_to 'Process Results',
                      item_source_codes_process_results_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(:source_code).scan_github? %>
                  <%=
                      link_to "Scan Files in GitHub",
                      item_source_codes_scan_github_path(@item),
                      class: "dropdown-item"
                   %>
                <% end %>

                <% if policy(:source_code).scan_gitlab? %>
                  <%=
                      link_to "Scan Files in GitLab",
                      item_source_codes_scan_gitlab_path(@item),
                      class: "dropdown-item"
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@source_code).edit? %>
                  <%=
                      link_to "Edit #{t('misc.source_code')}",
                      edit_item_source_code_path(@item, @source_code),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:source_code).create? %>
                  <%=
                      link_to "New #{t('misc.source_code')}",
                      new_item_source_code_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@source_code).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_source_code_mark_as_deleted_path(@item, @source_code),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@source_code).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @source_code], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'module_descriptions' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="module_descriptions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.module_descriptions') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:module_description).create? %>
                  <%=
                      link_to "New #{t('misc.module_description')}",
                      new_item_module_description_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).export? %>
                  <%=
                      link_to 'Export',
                      item_module_descriptions_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).import? %>
                  <%=
                      link_to 'Import',
                      item_module_descriptions_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_module_descriptions_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="module_descriptions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.module_description') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.module_descriptions'),
                    item_module_descriptions_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:module_description).create? %>
                  <%=
                      link_to "Save #{t('misc.module_description')}",
                      'javascript:submitForm("new_module_description")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to "New #{t('misc.module_description')}",
                      new_item_module_description_path(@item),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <% if policy(:module_description).export? %>
                  <%=
                      link_to 'Export',
                      item_module_descriptions_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).import? %>
                  <%=
                      link_to 'Import',
                      item_module_descriptions_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_module_descriptions_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="module_descriptions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.module_description') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.module_descriptions'),
                    item_module_descriptions_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@module_description).update? %>
                  <%=
                      link_to "Update #{t('misc.module_description')}",
                      'javascript:$(\'[id*="edit_module_description_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@module_description).show? %>
                  <%=
                      link_to "Show #{t('misc.module_description')}",
                      item_module_description_path(@item, @module_description),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:module_description).create? %>
                  <%=
                      link_to "New #{t('misc.module_description')}",
                      new_item_module_description_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).export? %>
                  <%=
                      link_to 'Export',
                      item_module_descriptions_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).import? %>
                  <%=
                      link_to 'Import',
                      item_module_descriptions_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_module_descriptions_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@module_description).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_module_description_mark_as_deleted_path(@item, @module_description),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@module_description).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @module_description], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="module_descriptions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.module_description') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.module_descriptions'),
                    item_module_descriptions_path(@item),
                    class: 'dropdown-item'
                 %>

                <% if policy(:module_description).export? %>
                  <%=
                      link_to 'Export',
                      item_module_descriptions_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).import? %>
                  <%=
                      link_to 'Import',
                      item_module_descriptions_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_module_descriptions_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@module_description).edit? %>
                  <%=
                      link_to "Edit #{t('misc.module_description')}",
                      edit_item_module_description_path(@item, @module_description),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:module_description).create? %>
                  <%=
                      link_to "New #{t('misc.module_description')}",
                      new_item_module_description_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@module_description).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_module_description_mark_as_deleted_path(@item, @module_description),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@module_description).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @module_description], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'test_cases' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="test_cases" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.test_cases') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:test_case).create? %>
                  <%=
                      link_to "New #{t('misc.test_case')}",
                      new_item_test_case_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).export? %>
                  <%=
                      link_to 'Export',
                      item_test_cases_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).import? %>
                  <%=
                      link_to 'Import',
                      item_test_cases_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_test_cases_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="test_cases" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.test_case') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.test_cases'),
                    item_test_cases_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:test_case).create? %>
                  <%=
                      link_to "Save #{t('misc.test_case')}",
                      'javascript:submitForm("new_test_case")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to "New #{t('misc.test_case')}",
                      new_item_test_case_path(@item),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <% if policy(:test_case).export? %>
                  <%=
                      link_to 'Export',
                      item_test_cases_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).import? %>
                  <%=
                      link_to 'Import',
                      item_test_cases_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_test_cases_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="test_cases" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.test_case') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.test_cases'),
                    item_test_cases_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@test_case).update? %>
                  <%=
                      link_to "Update #{t('misc.test_case')}",
                      'javascript:$(\'[id*="edit_test_case_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@test_case).show? %>
                  <%=
                      link_to "Show #{t('misc.test_case')}",
                      item_test_case_path(@item, @test_case),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:test_case).create? %>
                  <%=
                      link_to "New #{t('misc.test_case')}",
                      new_item_test_case_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).export? %>
                  <%=
                      link_to 'Export',
                      item_test_cases_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).import? %>
                  <%=
                      link_to 'Import',
                      item_test_cases_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_test_cases_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@test_case).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_test_case_mark_as_deleted_path(@item, @test_case),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@test_case).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @test_case], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="test_cases" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.test_case') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.test_cases'),
                    item_test_cases_path(@item),
                    class: 'dropdown-item'
                 %>

                <% if policy(:test_case).export? %>
                  <%=
                      link_to 'Export',
                      item_test_cases_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).import? %>
                  <%=
                      link_to 'Import',
                      item_test_cases_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_test_cases_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@test_case).edit? %>
                  <%=
                      link_to "Edit #{t('misc.test_case')}",
                      edit_item_test_case_path(@item, @test_case),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_case).create? %>
                  <%=
                      link_to "New #{t('misc.test_case')}",
                      new_item_test_case_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@test_case).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_test_case_mark_as_deleted_path(@item, @test_case),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@test_case).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @test_case], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'test_procedures' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="test_procedures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.test_procedure') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:test_procedure).create? %>
                  <%=
                      link_to "New #{t('misc.test_procedure')}",
                      new_item_test_procedure_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).export? %>
                  <%=
                      link_to 'Export',
                      item_test_procedures_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).import? %>
                  <%=
                      link_to 'Import',
                      item_test_procedures_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_test_procedures_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="test_procedures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.test_procedure') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.test_procedure'),
                    item_test_procedures_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:test_procedure).create? %>
                  <%=
                      link_to "Save #{t('misc.test_procedure')}",
                      'javascript:submitForm("new_test_procedure")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to "New #{t('misc.test_procedure')}",
                      new_item_test_procedure_path(@item),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <% if policy(:test_procedure).export? %>
                  <%=
                      link_to 'Export',
                      item_test_procedures_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).import? %>
                  <%=
                      link_to 'Import',
                      item_test_procedures_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_test_procedures_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="test_procedures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.test_procedure') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.test_procedure'),
                    item_test_procedures_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@test_procedure).update? %>
                  <%=
                      link_to "Update #{t('misc.test_procedure')}",
                      'javascript:$(\'[id*="edit_test_procedure_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@test_procedure).show? %>
                  <%=
                      link_to "Show #{t('misc.test_procedure')}",
                      item_test_procedure_path(@item, @test_procedure),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:test_procedure).create? %>
                  <%=
                      link_to "New #{t('misc.test_procedure')}",
                      new_item_test_procedure_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).export? %>
                  <%=
                      link_to 'Export',
                      item_test_procedures_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).import? %>
                  <%=
                      link_to 'Import',
                      item_test_procedures_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_test_procedures_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@test_procedure).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_test_procedure_mark_as_deleted_path(@item, @test_procedure),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@test_procedure).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @test_procedure], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="test_procedures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('misc.test_procedure') %></a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to t('misc.test_procedure'),
                    item_test_procedures_path(@item),
                    class: 'dropdown-item'
                 %>

                <% if policy(:test_procedure).export? %>
                  <%=
                      link_to 'Export',
                      item_test_procedures_export_path(@item),
                      target: :_blank,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).import? %>
                  <%=
                      link_to 'Import',
                      item_test_procedures_import_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).renumber? %>
                  <%=
                      link_to 'Renumber',
                      item_test_procedures_renumber_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@test_procedure).edit? %>
                  <%=
                      link_to "Edit #{t('misc.test_procedure')}",
                      edit_item_test_procedure_path(@item, @test_procedure),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:test_procedure).create? %>
                  <%=
                      link_to "New #{t('misc.test_procedure')}",
                      new_item_test_procedure_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@test_procedure).mark_as_deleted? %>
                  <%= 
                      link_to 'Mark as Deleted',
                      item_test_procedure_mark_as_deleted_path(@item, @test_procedure),
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@test_procedure).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @test_procedure], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'requirements_baselines' %>
          <%
            object_name = 'Artifact'
            case @archive_type
              when Constants::PROJECT_ARCHIVE
                object_name = I18n.t('projects.single_title')
              when Constants::DOCUMENT_ARCHIVE
                object_name = I18n.t('misc.document')
              when Constants::MODEL_ARCHIVE
                object_name = I18n.t('misc.model_file')
              when Constants::SYSTEM_REQUIREMENTS_ARCHIVE
                object_name = I18n.t('misc.system_requirement')
              when Constants::HIGH_LEVEL_REQUIREMENTS_ARCHIVE
                object_name = @item.get_item_title(:high_level, :singular)
              when Constants::LOW_LEVEL_REQUIREMENTS_ARCHIVE
                object_name = @item.get_item_title(:low_level, :singular)
              when Constants::SOURCE_CODE_ARCHIVE
                object_name = I18n.t('misc.source_code')
              when Constants::TEST_CASE_ARCHIVE
                object_name = I18n.t('misc.test_case')
              when Constants::TEST_PROCEDURE_ARCHIVE
                object_name = I18n.t('misc.test_procedure')
              when Constants::REVIEW_ARCHIVE
                object_name = I18n.t('reviews.single_title')
            end if @archive_type.present?
          %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="requirements_baselines" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= object_name %> Baselines</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:requirements_baseline).create? %>
                  <%=
                      link_to "New #{object_name} Baseline",
                      new_project_requirements_baseline_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="requirements_baselines" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= object_name %>  Baseline</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to "#{object_name} Baselines",
                    project_requirements_baselines_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:requirements_baseline).create? %>
                  <%=
                      link_to "Save #{object_name} Baseline",
                      'javascript:submitForm("new_requirements_baseline")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to "New #{object_name} Baseline",
                      new_project_requirements_baseline_path(@project),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="requirements_baselines" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= object_name %>  Baseline</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to "#{object_name} Baselines",
                    project_requirements_baselines_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@requirements_baseline).update? %>
                  <%=
                      link_to "Update #{object_name} Baseline",
                      'javascript:$(\'[id*="edit_requirements_baseline_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@requirements_baseline).show? %>
                  <%=
                      link_to "Show #{object_name} Baseline",
                      project_requirements_baseline_path(@project, @requirements_baseline),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:requirements_baseline).create? %>
                  <%=
                      link_to "New #{object_name} Baseline",
                      new_project_requirements_baseline_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@requirements_baseline).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@project, @requirements_baseline], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="requirements_baselines" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= object_name %>  Baseline</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to "#{object_name} Baselines",
                    project_requirements_baselines_path(@project),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@requirements_baseline).edit? %>
                  <%=
                      link_to "Edit #{object_name} Baseline",
                      edit_project_requirements_baseline_path(@project, @requirements_baseline),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:requirements_baseline).create? %>
                  <%=
                      link_to "New #{object_name} Baseline",
                      new_project_requirements_baseline_path(@project),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@requirements_baseline).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@project, @requirements_baseline], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'requirements_tracing' %>
          <li class="nav-item dropdown border-left">
            <a class="nav-link dropdown-toggle" id="requirements_tracing" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Requirements Tracing Matrix</a>
            <div class="dropdown-menu" aria-labelledby="dropdown_admin">
            <%=
                  link_to 'Back',
                  go_back_path(1),  onclick: 'validateBack(1, this)',
                  class: 'dropdown-item'
             %>
          </li>
        <% elsif controller.controller_name == 'documents' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="documents" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documents</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:document).create? %>
                  <%=
                      link_to 'New Document',
                      new_item_document_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="documents" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Documents',
                    item_documents_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:document).create? %>
                  <%=
                      link_to 'Create Document',
                      'javascript:submitForm("new_document")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Document',
                      new_item_document_path(@item),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="documents" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Documents',
                    item_documents_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document).update? && @document.archive_id.nil? %>
                  <%=
                      link_to 'Update Document',
                      'javascript:$(\'[id*="edit_document_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@document).show? %>
                  <%=
                      link_to 'Show Document',
                      item_document_path(@item, @document),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:document).create? %>
                  <%=
                      link_to 'New Document',
                      new_item_document_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document).destroy? && @document.archive_id.nil?%>
                  <%=
                      link_to 'Delete',
                      [@item, @document], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="documents" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Documents',
                    item_documents_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document).edit? && @document.archive_id.nil? %>
                  <%=
                      link_to 'Edit Document',
                      edit_item_document_path(@item, @document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:document).create? %>
                  <%=
                      link_to 'New Document',
                      new_item_document_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:document).document_history? && @document.archive_id.nil? %>
                  <%=
                      link_to 'Document History',
                      item_document_document_history_path(@item, @document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document).destroy? && @document.archive_id.nil? %>
                  <%=
                      link_to 'Delete',
                      [@item, @document], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'reviews' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="reviews" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Reviews</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:review).create? %>
                  <%=
                      link_to 'New Review',
                      new_item_review_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="reviews" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Reviews',
                    item_reviews_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:review).create? %>
                  <%=
                      link_to 'Create Review',
                      'javascript:validate()',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Review',
                      new_item_review_path(@item),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="reviews" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Reviews',
                    item_reviews_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@review).update? %>
                  <%=
                      link_to 'Update Review',
                      'javascript:validate()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@review).show? %>
                  <%=
                      link_to 'Show Review',
                      item_review_path(@item, @review),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:review).create? %>
                  <%=
                      link_to 'New Review',
                      new_item_review_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review).signin? %>
                  <%=
                      link_to 'Sign-In Sheet',
                      review_sign_in_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review).assign_checklists? &&
                      @review.evaluators.present?        &&
                      @review.checklist_item.present?    &&
                      !@review.checklists_assigned %>
                  <%=
                      link_to 'Assign Checklists',
                      review_assign_checklists_path(@review),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:review).fill_in_checklist? &&
                      @my_checklist_items.present? %>
                  <%=
                      link_to 'Fill in Checklist',
                      review_fill_in_checklist_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>
 
                <% if policy(:review).edit_checklist? %>
                  <%=
                      link_to 'Edit Master Checklist',
                      review_checklist_items_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>
 
                <% if policy(:review).edit_checklist? %>
                  <%=
                      link_to 'Remove All Checklist Items',
                      review_checklistremoveall_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>
 
                <% if policy(:review).edit_checklist? %>
                  <%=
                      link_to 'Populate Master Checklist',
                      review_checklistfill_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@review).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @review], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="reviews" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Reviews',
                    item_reviews_path(@item),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@review).edit? %>
                  <%=
                      link_to 'Edit Review',
                      edit_item_review_path(@item, @review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review).create? %>
                  <%=
                      link_to 'New Review',
                      new_item_review_path(@item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review).signin? %>
                  <%=
                      link_to 'Sign-In Sheet',
                      review_sign_in_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review).consolidated_checklist? %>
                  <%=
                       link_to 'Consolidated Checklist',
                       review_consolidated_checklist_path(@review),
                       class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@review).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@item, @review], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'signin' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="reviews" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Reviews',
                    item_reviews_path(@review.item_id),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@review).edit? %>
                  <%=
                      link_to 'Edit Review',
                      edit_item_review_path(@review.item_id, @review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review).create? %>
                  <%=
                      link_to 'New Review',
                      new_item_review_path(@review.item_id),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review).select_attendees? %>
                  <%=
                      link_to 'Select Attendees',
                      review_save_sign_in_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review).save_signin? %>
                  <%=
                      link_to 'Save Sign-In Sheet',
                      review_save_sign_in_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'consolidated_checklist' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="reviews" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Reviews',
                    item_reviews_path(@review.item_id),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@review).edit? %>
                  <%=
                      link_to 'Edit Review',
                      edit_item_review_path(@review.item_id, @review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'action_items' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="action_items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Action Items</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:action_item).create? %>
                  <%=
                      link_to 'New Action Item',
                      new_review_action_item_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="action_items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Action Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Action Items',
                    review_action_items_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:action_item).create? %>
                  <%=
                      link_to 'Create Action Item',
                      'javascript:submitForm("new_action_item")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Action Item',
                      new_review_action_item_path(@review),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="action_items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Action Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Action Items',
                    review_action_items_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@action_item).update? %>
                  <%=
                      link_to 'Update Action Item',
                      'javascript:$(\'[id*="edit_action_item_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@action_item).show? %>
                  <%=
                      link_to 'Show Action Item',
                      review_action_item_path(@review, @action_item),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:action_item).create? %>
                  <%=
                      link_to 'New Action Item',
                      new_review_action_item_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@action_item).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@review, @action_item], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="action_items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Action Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Action Items',
                    review_action_items_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@action_item).edit? %>
                  <%=
                      link_to 'Edit Action Item',
                      edit_review_action_item_path(@review, @action_item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:action_item).create? %>
                  <%=
                      link_to 'New Action Item',
                      new_review_action_item_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@action_item).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@review, @action_item], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'checklist_items' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="checklist_items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Checklist Items</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:checklist_item).create? %>
                  <%=
                      link_to 'New Checklist Item',
                      new_review_checklist_item_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="checklist_items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Checklist Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Checklist Items',
                    review_checklist_items_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:checklist_item).create? %>
                  <%=
                      link_to 'Create Checklist Item',
                      'javascript:submitForm("new_checklist_item")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Checklist Item',
                      new_review_checklist_item_path(@review),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="checklist_items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Checklist Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Checklist Items',
                    review_checklist_items_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@checklist_item).update? %>
                  <%=
                      link_to 'Update Checklist Item',
                      'javascript:$(\'[id*="edit_checklist_item_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@checklist_item).show? %>
                  <%=
                      link_to 'Show Checklist Item',
                      review_checklist_item_path(@review, @checklist_item),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:checklist_item).create? %>
                  <%=
                      link_to 'New Checklist Item',
                      new_review_checklist_item_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@checklist_item).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@review, @checklist_item], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="checklist_items" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Checklist Item</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Checklist Items',
                    review_checklist_items_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@checklist_item).edit? %>
                  <%=
                      link_to 'Edit Checklist Item',
                      edit_review_checklist_item_path(@review, @checklist_item),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:checklist_item).create? %>
                  <%=
                      link_to 'New Checklist Item',
                      new_review_checklist_item_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@checklist_item).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@review, @checklist_item], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'requirements_tracing' %>
          <li class="nav-item dropdown border-left">
            <a class="nav-link dropdown-toggle" id="requirements_tracing" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Requirements Tracing Matrix</a>
            <div class="dropdown-menu" aria-labelledby="dropdown_admin">
            <%=
                  link_to 'Back',
                  go_back_path(1),  onclick: 'validateBack(1, this)',
                  class: 'dropdown-item'
             %>
          </li>
        <% elsif controller.controller_name == 'document_attachments' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Attachments</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:document_attachment).create? %>
                  <%=
                      link_to 'New Document Attachment',
                      new_document_document_attachment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Attachments',
                    document_document_attachments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:document_attachment).create? %>
                  <%=
                      link_to 'Create Document Attachment',
                      'javascript:submitForm("new_document_attachment")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Document Attachment',
                      new_document_document_attachment_path(@document),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Attachments',
                    document_document_attachments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_attachment).update? %>
                  <%=
                      link_to 'Update Document Attachment',
                      'javascript:$(\'[id*="edit_document_attachment_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@document_attachment).show? %>
                  <%=
                      link_to 'Show Document Attachment',
                      document_document_attachment_path(@document, @document_attachment),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:document_attachment).create? %>
                  <%=
                      link_to 'New Document Attachment',
                      new_document_document_attachment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_attachment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@document, @document_attachment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Attachments',
                    document_document_attachments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_attachment).edit? %>
                  <%=
                      link_to 'Edit Document Attachment',
                      edit_document_document_attachment_path(@document, @document_attachment),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:document_attachment).create? %>
                  <%=
                      link_to 'New Document Attachment',
                      new_document_document_attachment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_attachment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@document, @document_attachment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'document_comments' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_comments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Comments</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:document_comment).create? %>
                  <%=
                      link_to 'New Document Comment',
                      new_document_document_comment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_comments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Comment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Comments',
                    document_document_comments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:document_comment).create? %>
                  <%=
                      link_to 'Create Document Comment',
                      'javascript:submitForm("new_document_comment")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Document Comment',
                      new_document_document_comment_path(@document),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_comments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Comment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Comments',
                    document_document_comments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_comment).update? %>
                  <%=
                      link_to 'Update Document Comment',
                      'javascript:$(\'[id*="edit_document_comment_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@document_comment).show? %>
                  <%=
                      link_to 'Show Document Comment',
                      document_document_comment_path(@document, @document_comment),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:document_comment).create? %>
                  <%=
                      link_to 'New Document Comment',
                      new_document_document_comment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_comment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@document, @document_comment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_comments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Comment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Comments',
                    document_document_comments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_comment).edit? %>
                  <%=
                      link_to 'Edit Document Comment',
                      edit_document_document_comment_path(@document, @document_comment),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:document_comment).create? %>
                  <%=
                      link_to 'New Document Comment',
                      new_document_document_comment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_comment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@document, @document_comment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'document_attachments' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Attachments</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:document_attachment).create? %>
                  <%=
                      link_to 'New Document Attachment',
                      new_document_document_attachment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Attachments',
                    document_document_attachments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:document_attachment).create? %>
                  <%=
                      link_to 'Create Document Attachment',
                      'javascript:submitForm("new_document_attachment")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Document Attachment',
                      new_document_document_attachment_path(@document),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Attachments',
                    document_document_attachments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_attachment).update? %>
                  <%=
                      link_to 'Update Document Attachment',
                      'javascript:$(\'[id*="edit_document_attachment_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@document_attachment).show? %>
                  <%=
                      link_to 'Show Document Attachment',
                      document_document_attachment_path(@document, @document_attachment),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:document_attachment).create? %>
                  <%=
                      link_to 'New Document Attachment',
                      new_document_document_attachment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_attachment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@document, @document_attachment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Attachments',
                    document_document_attachments_path(@document),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_attachment).edit? %>
                  <%=
                      link_to 'Edit Document Attachment',
                      edit_document_document_attachment_path(@document, @document_attachment),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:document_attachment).create? %>
                  <%=
                      link_to 'New Document Attachment',
                      new_document_document_attachment_path(@document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_attachment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@document, @document_attachment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'github_accesses' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="github_accesses" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">GitHub Accesses</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:github_access).create? %>
                  <%=
                      link_to 'New GitHub Access',
                      new_github_access_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="github_accesses" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">GitHub Access</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'GitHub Accesses',
                    github_accesses_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:github_access).create? %>
                  <%=
                      link_to 'Create GitHub Access',
                      'javascript:submitForm("new_github_access")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New GitHub Access',
                      new_github_access_path,
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="github_accesses" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">GitHub Access</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'GitHub Accesses',
                    github_accesses_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@github_access).update? %>
                  <%=
                      link_to 'Update GitHub Access',
                      'javascript:$(\'[id*="edit_github_access_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@github_access).show? %>
                  <%=
                      link_to 'Show GitHub Access',
                      github_access_path(@github_access),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:github_access).create? %>
                  <%=
                      link_to 'New GitHub Access',
                      new_github_access_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@github_access).destroy? %>
                  <%=
                      link_to 'Delete',
                      @github_access, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="github_accesses" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">GitHub Access</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'GitHub Accesses',
                    github_accesses_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@github_access).edit? %>
                  <%=
                      link_to 'Edit GitHub Access',
                      edit_github_access_path(@github_access),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:github_access).create? %>
                  <%=
                      link_to 'New GitHub Access',
                      new_github_access_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@github_access).destroy? %>
                  <%=
                      link_to 'Delete',
                      @github_access, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'gitlab_accesses' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="gitlab_accesses" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Gitlab Accesses</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:gitlab_access).create? %>
                  <%=
                      link_to 'New Gitlab Access',
                      new_gitlab_access_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="gitlab_accesses" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Gitlab Access</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Gitlab Accesses',
                    gitlab_accesses_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:gitlab_access).create? %>
                  <%=
                      link_to 'Create Gitlab Access',
                      'javascript:submitForm("new_gitlab_access")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Gitlab Access',
                      new_gitlab_access_path,
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="gitlab_accesses" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Gitlab Access</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Gitlab Accesses',
                    gitlab_accesses_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@gitlab_access).update? %>
                  <%=
                      link_to 'Update Gitlab Access',
                      'javascript:$(\'[id*="edit_gitlab_access_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@gitlab_access).show? %>
                  <%=
                      link_to 'Show Gitlab Access',
                      gitlab_access_path(@gitlab_access),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:gitlab_access).create? %>
                  <%=
                      link_to 'New Gitlab Access',
                      new_gitlab_access_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@gitlab_access).destroy? %>
                  <%=
                      link_to 'Delete',
                      @gitlab_access, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="gitlab_accesses" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Gitlab Access</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Gitlab Accesses',
                    gitlab_accesses_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@gitlab_access).edit? %>
                  <%=
                      link_to 'Edit Gitlab Access',
                      edit_gitlab_access_path(@gitlab_access),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:gitlab_access).create? %>
                  <%=
                      link_to 'New Gitlab Access',
                      new_gitlab_access_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@gitlab_access).destroy? %>
                  <%=
                      link_to 'Delete',
                      @gitlab_access, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'problem_report_attachments' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_report_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report Attachments</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:problem_report_attachment).create? %>
                  <%=
                      link_to 'New Problem Report Attachment',
                      new_problem_report_problem_report_attachment_path(@problem_report),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_report_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Report Attachments',
                    problem_report_problem_report_attachments_path(@problem_report),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:problem_report_attachment).create? %>
                  <%=
                      link_to 'Create Problem Report Attachment',
                      'javascript:submitForm("new_problem_report_attachment")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Problem Report Attachment',
                      new_problem_report_problem_report_attachment_path(@problem_report),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_report_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Report Attachments',
                    problem_report_problem_report_attachments_path(@problem_report),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report_attachment).update? %>
                  <%=
                      link_to 'Update Problem Report Attachment',
                      'javascript:$(\'[id*="edit_problem_report_attachment_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@problem_report_attachment).show? %>
                  <%=
                      link_to 'Show Problem Report Attachment',
                      problem_report_problem_report_attachment_path(@problem_report, @problem_report_attachment),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:problem_report_attachment).create? %>
                  <%=
                      link_to 'New Problem Report Attachment',
                      new_problem_report_problem_report_attachment_path(@problem_report),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report_attachment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@problem_report, @problem_report_attachment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_report_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Report Attachments',
                    problem_report_problem_report_attachments_path(@problem_report),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report_attachment).edit? %>
                  <%=
                      link_to 'Edit Problem Report Attachment',
                      edit_problem_report_problem_report_attachment_path(@problem_report, @problem_report_attachment),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:problem_report_attachment).create? %>
                  <%=
                      link_to 'New Problem Report Attachment',
                      new_problem_report_problem_report_attachment_path(@problem_report),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report_attachment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@problem_report, @problem_report_attachment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'problem_report_histories' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_report_histories" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report Histories</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:problem_report_history).create? %>
                  <%=
                      link_to 'New Problem Report History',
                      new_problem_report_problem_report_history_path(@problem_report),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_report_histories" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report History</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Report Histories',
                    problem_report_problem_report_histories_path(@problem_report),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:problem_report_history).create? %>
                  <%=
                      link_to 'Create Problem Report History',
                      'javascript:submitForm("new_problem_report_history")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Problem Report History',
                      new_problem_report_problem_report_history_path(@problem_report),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_report_histories" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report History</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Report Histories',
                    problem_report_problem_report_histories_path(@problem_report),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report_history).update? %>
                  <%=
                      link_to 'Update Problem Report History',
                      'javascript:$(\'[id*="edit_problem_report_history_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@problem_report_history).show? %>
                  <%=
                      link_to 'Show Problem Report History',
                      problem_report_problem_report_history_path(@problem_report, @problem_report_history),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:problem_report_history).create? %>
                  <%=
                      link_to 'New Problem Report History',
                      new_problem_report_problem_report_history_path(@problem_report),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report_history).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@problem_report, @problem_report_history], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="problem_report_histories" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Problem Report History</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Problem Report Histories',
                    problem_report_problem_report_histories_path(@problem_report),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report_history).edit? %>
                  <%=
                      link_to 'Edit Problem Report History',
                      edit_problem_report_problem_report_history_path(@problem_report, @problem_report_history),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:problem_report_history).create? %>
                  <%=
                      link_to 'New Problem Report History',
                      new_problem_report_problem_report_history_path(@problem_report),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@problem_report_history).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@problem_report, @problem_report_history], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'review_attachments' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="review_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review Attachments</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:review_attachment).create? %>
                  <%=
                      link_to 'New Review Attachment',
                      new_review_review_attachment_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="review_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Review Attachments',
                    review_review_attachments_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:review_attachment).create? %>
                  <%=
                      link_to 'Create Review Attachment',
                      'javascript:submitForm("new_review_attachment")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Review Attachment',
                      new_review_review_attachment_path(@review),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="review_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Review Attachments',
                    review_review_attachments_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@review_attachment).update? %>
                  <%=
                      link_to 'Update Review Attachment',
                      'javascript:$(\'[id*="edit_review_attachment_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@review_attachment).show? %>
                  <%=
                      link_to 'Show Review Attachment',
                      review_review_attachment_path(@review, @review_attachment),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:review_attachment).create? %>
                  <%=
                      link_to 'New Review Attachment',
                      new_review_review_attachment_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@review_attachment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@review, @review_attachment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="review_attachments" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Review Attachment</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Review Attachments',
                    review_review_attachments_path(@review),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@review_attachment).edit? %>
                  <%=
                      link_to 'Edit Review Attachment',
                      edit_review_review_attachment_path(@review, @review_attachment),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:review_attachment).create? %>
                  <%=
                      link_to 'New Review Attachment',
                      new_review_review_attachment_path(@review),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@review_attachment).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@review, @review_attachment], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'templates' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="templates" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Templates</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:template).create? %>
                  <%=
                      link_to 'New Template',
                      new_template_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="templates" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Templates',
                    templates_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:template).create? %>
                  <%=
                      link_to 'Create Template',
                      'javascript:submitForm("new_template")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Template',
                      new_template_path,
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="templates" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Templates',
                    templates_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@template).update? %>
                  <%=
                      link_to 'Update Template',
                      'javascript:$(\'[id*="edit_template_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@template).show? %>
                  <%=
                      link_to 'Show Template',
                      template_path(@template),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:template).create? %>
                  <%=
                      link_to 'New Template',
                      new_template_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if @template.present? && policy(@template).destroy? %>
                  <%=
                      link_to 'Delete',
                      @template, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="templates" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Templates',
                    templates_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@template).edit? %>
                  <%=
                      link_to 'Edit Template',
                      edit_template_path(@template),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:template).create? %>
                  <%=
                      link_to 'New Template',
                      new_template_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if @template.present? && policy(@template).destroy? %>
                  <%=
                      link_to 'Delete',
                      @template, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'template_checklists' %>
          <% if controller.action_name == 'index' && @template.present? %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="template_checklists" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template Checklists</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:template_checklist).create? %>
                  <%=
                      link_to 'New Template Checklist',
                      new_template_template_checklist_path(@template),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="template_checklists" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template Checklist</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Template Checklists',
                    template_template_checklists_path(@template),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:template_checklist).create? %>
                  <%=
                      link_to 'Create Template Checklist',
                      'javascript:submitForm("new_template_checklist")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Template Checklist',
                      new_template_template_checklist_path(@template),
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="template_checklists" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template Checklist</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Template Checklists',
                    template_template_checklists_path(@template),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@template_checklist).update? %>
                  <%=
                      link_to 'Update Template Checklist',
                      'javascript:$(\'[id*="edit_template_checklist_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if @template.present? && policy(@template_checklist).show? %>
                  <%=
                      link_to 'Show Template Checklist',
                      template_template_checklist_path(@template, @template_checklist),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:template_checklist).create? %>
                  <%=
                      link_to 'New Template Checklist',
                      new_template_template_checklist_path(@template),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if @template.present? && policy(@template_checklist).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@template, @template_checklist], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="template_checklists" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template Checklist</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Template Checklists',
                    template_template_checklists_path(@template),
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if @template.present? && policy(@template_checklist).edit? %>
                  <%=
                      link_to 'Edit Template Checklist',
                      edit_template_template_checklist_path(@template, @template_checklist),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:template_checklist).create? %>
                  <%=
                      link_to 'New Template Checklist',
                      new_template_template_checklist_path(@template),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if @template.present? && policy(@template_checklist).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@template, @template_checklist], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'template_documents' %>
          <% if controller.action_name == 'index' && @template.present? %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="template_documents" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template Documents</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:template_document).create? %>
                  <%=
                      link_to 'New Template Document',
                      new_template_template_document_path(@template, @template_document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="template_documents" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template Document</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if @template.present? %> 
                  <%=
                      link_to 'Template Documents',
                      template_template_documents_path(@template, @template_document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(:template_document).create? %>
                  <%=
                      link_to 'Create Template Document',
                      'javascript:submitForm("new_template_document")',
                      class: 'dropdown-item'
                   %>
                  <% if @template.present? %>
                    <%=
                        link_to 'New Template Document',
                        new_template_template_document_path(@template, @template_document),
                        class: 'dropdown-item'
                     %>
                  <% end %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="template_documents" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template Document</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if @template.present? %>
                  <%=
                      link_to 'Template Documents',
                      template_template_documents_path(@template, @template_document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@template_document).update? %>
                  <%=
                      link_to 'Update Template Document',
                      'javascript:$(\'[id*="edit_template_document_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if @template.present? && policy(@template_document).show? %>
                  <%=
                      link_to 'Show Template Document',
                      template_template_document_path(@template, @template_document),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if @template.present? && policy(:template_document).create? %>
                  <%=
                      link_to 'New Template Document',
                      new_template_template_document_path(@template, @template_document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if @template.present? && policy(@template_document).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@template, @template_document], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="template_documents" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Template Document</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if @template.present? %>
                  <%=
                      link_to 'Template Documents',
                      template_template_documents_path(@template, @template_document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if @template.present? && policy(@template_document).edit? %>
                  <%=
                      link_to 'Edit Template Document',
                      edit_template_template_document_path(@template, @template_document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if @template.present? && policy(:template_document).create? %>
                  <%=
                      link_to 'New Template Document',
                      new_template_template_document_path(@template, @template_document),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if @template.present? && policy(@template_document).destroy? %>
                  <%=
                      link_to 'Delete',
                      [@template, @template_document], method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% elsif controller.controller_name == 'document_types' %>
          <% if controller.action_name == 'index' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_types" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Types</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <% if policy(:document_type).create? %>
                  <%=
                      link_to 'New Document Type',
                      new_document_type_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'new' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_types" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Type</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Types',
                    document_types_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(:document_type).create? %>
                  <%=
                      link_to 'Create Document Type',
                      'javascript:submitForm("new_document_type")',
                      class: 'dropdown-item'
                   %>
                  <%=
                      link_to 'New Document Type',
                      new_document_type_path,
                      class: 'dropdown-item'
                   %>
                  <div class="dropdown-divider"></div>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>
  
                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'edit' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_types" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Type</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Types',
                    document_types_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_type).update? %>
                  <%=
                      link_to 'Update Document Type',
                      'javascript:$(\'[id*="edit_document_type_"]\').submit()',
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(@document_type).show? %>
                  <%=
                      link_to 'Show Document Type',
                      document_type_path(@document_type),
                      class: 'dropdown-item'
                    %>
                <% end %>

                <% if policy(:document_type).create? %>
                  <%=
                      link_to 'New Document Type',
                      new_document_type_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_type).destroy? %>
                  <%=
                      link_to 'Delete',
                      @document_type, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% elsif controller.action_name == 'show' %>
            <li class="nav-item dropdown border-left">
              <a class="nav-link dropdown-toggle" id="document_types" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Document Type</a>
              <div class="dropdown-menu" aria-labelledby="dropdown_admin">
                <%=
                    link_to 'Document Types',
                    document_types_path,
                    class: 'dropdown-item'
                 %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_type).edit? %>
                  <%=
                      link_to 'Edit Document Type',
                      edit_document_type_path(@document_type),
                      class: 'dropdown-item'
                   %>
                <% end %>

                <% if policy(:document_type).create? %>
                  <%=
                      link_to 'New Document Type',
                      new_document_type_path,
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <% if policy(@document_type).destroy? %>
                  <%=
                      link_to 'Delete',
                      @document_type, method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: 'dropdown-item'
                   %>
                <% end %>

                <div class="dropdown-divider"></div>

                <%=
                      link_to 'Back',
                      go_back_path(1),  onclick: 'validateBack(1, this)',
                      class: 'dropdown-item'
                 %>

                <% if @undo_path.present? && !session[:archives_visible].present? %>
                  <%=
                      link_to 'Undo',
                      @undo_path,
                      class: 'dropdown-item'
                   %>
                <% end %>
              </div>
            </li>
          <% end %>
        <% end %>
      <% end %>
    </ul>
  </div>
  <% object_name = controller.controller_name.singularize.to_sym %>
  <div style="padding-left: 10px;">
  <div class="btn-menu" style="display: none">
  [
    <%= controller.controller_name %>
    <%= controller.action_name %>
    <%= policy(object_name).create? %>
  ]
  </div>
  <% if controller.action_name == 'index' %>
    <% if (object_name != :session) && policy(object_name).create? %>
      <% if controller.controller_name == 'projects' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_project_url %>');">New</button>
      <% elsif controller.controller_name == 'problem_reports' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_project_problem_report_url(@project) %>');">New</button>
      <% elsif controller.controller_name == 'system_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_project_system_requirement_url(@project) %>');">New</button>
      <% elsif controller.controller_name == 'items' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_project_item_url(@project) %>');">New</button>
      <% elsif controller.controller_name == 'documents' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_document_url(@item) %>');">New</button>
      <% elsif controller.controller_name == 'high_level_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_high_level_requirement_url(@item) %>');">New</button>
      <% elsif controller.controller_name == 'low_level_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_high_level_requirement_url(@item) %>');">New</button>
      <% elsif controller.controller_name == 'test_cases' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_test_case_url(@item) %>');">New</button>
      <% elsif controller.controller_name == 'test_procedures' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_test_procedure_url(@item) %>');">New</button>
      <% elsif controller.controller_name == 'module_descriptions' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_module_description_url(@item) %>');">New</button>
      <% elsif controller.controller_name == 'source_codes' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_source_code_url(@item) %>');">New</button>
      <% elsif controller.controller_name == 'model_files' %>
        <% if @item.present? %>
          <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_model_file_url(@item) %>');">New</button>
        <% else %>
          <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_project_model_file_url(@project) %>');">New</button>
        <% end %>
      <% elsif controller.controller_name == 'reviews' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_item_review_url(@item) %>');">New</button>
      <% end %>
    <% else %>
      <% if controller.controller_name == 'requirements_tracing' %>
        <button class="btn-menu" type="button" onClick="runMatrix('specific');">View</button>
      <% end %>
    <% end %>
  <% elsif controller.action_name == 'new' %>
    <% if (object_name != :session) && policy(object_name).create? %>
      <% if controller.controller_name == 'projects' %>
        <button class="btn-menu" type="button"  onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'problem_reports' %>
        <button class="btn-menu" type="button"  onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'system_requirements' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'items' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'documents' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'high_level_requirements' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'low_level_requirements' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'test_cases' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'test_procedures' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'module_descriptions' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'source_codes' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'model_files' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'reviews' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% end %>
    <% end %>
  <% elsif controller.action_name == 'edit' %>
    <% if (object_name != :session) && policy(object_name).update? %>
      <% if controller.controller_name == 'projects' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= project_url(@project) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'problem_reports' %>
        <% if @item.present? %>
          <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_problem_url(@item, @problem_report) %>');">Show</button>
        <% else %>
          <button class="btn-menu" type="button" onClick="window.location.assign('<%= project_problem_report_url(@project, @problem_report) %>');">Show</button>
        <% end %>

        <button class="btn-menu" type="button"  onClick="window.location.assign('<%= project_problem_report_email_problem_report_url(@project, @problem_report) %>');">Email</button>
        <button class="btn-menu" type="button"  onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'system_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= project_system_requirement_url(@project, @system_requirement) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'items' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= project_item_url(@project, @item) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'documents' %>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'high_level_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_high_level_requirement_url(@item, @high_level_requirement) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'low_level_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_low_level_requirement_url(@item, @low_level_requirement) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'test_cases' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_test_case_url(@item, @test_case) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'test_procedures' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_test_procedure_url(@item, @test_procedure) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'module_descriptions' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_module_description_url(@item, @module_description) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'source_codes' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_source_code_url(@item, @source_code) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'model_files' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_model_file_url(@item, @source_code) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% elsif controller.controller_name == 'reviews' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= item_review_url(@item, @review) %>');">Show</button>
        <button class="btn-menu" type="button" onclick="validate();">Save Changes</button>
      <% end %>
    <% end %>
  <% elsif controller.action_name == 'show' %>
    <% if (object_name != :session) && policy(object_name).create? %>
      <% if controller.controller_name == 'projects' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_project_url(@project) %>');">Edit</button>
      <% elsif controller.controller_name == 'items' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_project_item_url(@project) %>');">New</button>
      <% elsif controller.controller_name == 'problem_reports' %>
        <% if @item.present? %>
          <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_problem_report_url(@item, @problem_report) %>');">Edit</button>
        <% else %>
          <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_project_problem_report_url(@project, @problem_report) %>');">Edit</button>
        <% end %>

        <button class="btn-menu" type="button"  onClick="window.location.assign('<%= project_problem_report_email_problem_report_url(@project, @problem_report) %>');">Email</button>
      <% elsif controller.controller_name == 'system_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_project_system_requirement_url(@project, @system_requirement) %>');">Edit</button>
      <% elsif controller.controller_name == 'items' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_project_item_url(@project, @item) %>');">Edit</button>
      <% elsif controller.controller_name == 'documents' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_document_url(@item, @document) %>');">Edit</button>
      <% elsif controller.controller_name == 'high_level_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_high_level_requirement_url(@item, @high_level_requirement) %>');">Edit</button>
      <% elsif controller.controller_name == 'low_level_requirements' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_high_level_requirement_url(@item, @low_level_requirement) %>');">Edit</button>
      <% elsif controller.controller_name == 'test_cases' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_test_case_url(@item, @test_case) %>');">Edit</button>
      <% elsif controller.controller_name == 'test_procedures' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_test_procedure_url(@item, @test_procedure) %>');">Edit</button>
      <% elsif controller.controller_name == 'source_codes' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_source_code_url(@item, @source_code) %>');">Edit</button>
      <% elsif controller.controller_name == 'module_descriptions' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_module_description_url(@item, @module_description) %>');">Edit</button>
      <% elsif controller.controller_name == 'model_files' %>
        <% if @item.present? %>
          <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_model_file_url(@item) %>');">Edit</button>
        <% else %>
          <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_project_model_file_url(@project) %>');">Edit</button>
        <% end %>
      <% elsif controller.controller_name == 'reviews' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= edit_item_review_url(@item, @review) %>');">Edit</button>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= review_consolidated_checklist_path(@review) %>');">Checklist</button>
      <% end %>
    <% end %>
  <% elsif controller.action_name == 'filtered_index' %>
    <% if (object_name != :session) && policy(object_name).create? %>
      <% if controller.controller_name == 'problem_reports' %>
        <button class="btn-menu" type="button" onClick="window.location.assign('<%= new_project_problem_report_url(@project) %>');">New</button>
      <% end %>

      <button class="btn-menu" type="button" onClick="window.location.assign('<%= project_problem_reports_url(@project) %>');">Show</button>
    <% end %>
  <% end %>
    <% if @undo_path.present? && !session[:archives_visible].present? %>
      <%= link_to 'Undo', @undo_path, class: 'btn-menu', title: @undo_message %>
    <% end %>

    <% if @redo_path.present? && !session[:archives_visible].present? %>
      <%= link_to 'Redo', @redo_path, class: 'btn-menu', title: @redo_message %>
    <% end %>

    <button class="btn-menu" type="button" onClick="goBack(1);">Back</button>
  </div>
</nav>
</header>
<script>
  function getElementsStartsWithId(id)       
  {
    var children = document.body.getElementsByTagName('*');
    var child;
    var result;

    for (var i = 0, length = children.length; i < length; i++)
    {
      child = children[i];

      if (child.id.substr(0, id.length) == id)
      {
        result = child;

        break
      }
    }

    return result;
  }

  function submitFormByPartialID(formId)
  {
    var form = getElementsStartsWithId(formId);

    if (form)
      form.submit();
  }

  function submitForm(formId)
  {
    var form = document.getElementById (formId);

    form.submit();
  }

  function goBack(count)
  {
    var url;
    var action = '<%= controller.action_name %>';

    if ((action == 'new') || (action == 'edit'))
    {
      if (!confirm('Continuing will cause you to lose any unsaved data. Do you want to continue?'))
        return;
    }

    if (window.location.hostname == "localhost")
      url = "http://" + window.location.hostname + ':' + window.location.port + "/go_back/" + count;
    else
      url = "https://" + window.location.hostname + "/pact_awc/go_back/" + count;

    window.location.assign(url);
  }

  history.pushState(null, null, location.href);
    window.onpopstate = function () {
        goBack(1)
    };
</script>